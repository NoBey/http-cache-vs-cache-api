# http-cache-vs-cache-api

> 利用 puppeteer 比较下单纯资源加载 service worker 性能 和 http cache 性能

> service worker 缓存依赖 cache api 故对比 cache api 和 http cache


## 测试数据

> 通过 generatejs 将 分别 9MB 和 16MB 图片生成 base64 js 文件

> netWork 限速 5000kb 

> 设备 mac os 11.4, MacBook Pro (16-inch, 2019)

>👇 9mb 和 16mb 并非真实文件大小


## 结论


service worker 和 http cache 性能 再有缓存情况下 基本持平 

cache-api 数据稳定性优于 http cache 但是考虑到 真实场景要 走一遍 service worker 的代理 结论是不变




### 9MB 数据 

|  | fetch (ms)  | cache api (ms)  |
|:----: | :----:  | :----:  |
| 平均 | 62 | 52.3469387755102 |
| 1 | 2703 | 2757 |
| 2 | 65 | 53 |
| 3 | 64 | 55 |
| 4 | 59 | 54 |
| 5 | 63 | 58 |
| 6 | 62 | 57 |
| 7 | 62 | 51 |
| 8 | 62 | 57 |
| 9 | 58 | 57 |
| 10 | 68 | 55 |
| 11 | 63 | 49 |
| 12 | 64 | 56 |
| 13 | 63 | 51 |
| 14 | 61 | 52 |
| 15 | 61 | 46 |
| 16 | 58 | 48 |
| 17 | 58 | 54 |
| 18 | 58 | 53 |
| 19 | 67 | 55 |
| 20 | 60 | 50 |
| 21 | 60 | 51 |
| 22 | 64 | 46 |
| 23 | 69 | 52 |
| 24 | 65 | 54 |
| 25 | 58 | 50 |
| 26 | 61 | 50 |
| 27 | 60 | 52 |
| 28 | 61 | 53 |
| 29 | 59 | 52 |
| 30 | 64 | 57 |
| 31 | 60 | 51 |
| 32 | 63 | 51 |
| 33 | 62 | 51 |
| 34 | 64 | 52 |
| 35 | 65 | 49 |
| 36 | 63 | 52 |
| 37 | 60 | 50 |
| 38 | 62 | 55 |
| 39 | 63 | 56 |
| 40 | 73 | 51 |
| 41 | 66 | 52 |
| 42 | 60 | 50 |
| 43 | 63 | 55 |
| 44 | 62 | 53 |
| 45 | 63 | 51 |
| 46 | 57 | 57 |
| 47 | 58 | 50 |
| 48 | 61 | 52 |
| 49 | 57 | 52 |
| 50 | 59 | 47 |




### 16MB 数据 

|  | fetch (ms)  | cache api (ms)  |
|:----: | :----:  | :----:  |
| 平均 | 94.22448979591837 | 87.10204081632654 |
| 1 | 4816 | 4901 |
| 2 | 99 | 89 |
| 3 | 97 | 87 |
| 4 | 95 | 80 |
| 5 | 93 | 95 |
| 6 | 92 | 89 |
| 7 | 93 | 98 |
| 8 | 92 | 81 |
| 9 | 96 | 86 |
| 10 | 92 | 82 |
| 11 | 94 | 82 |
| 12 | 93 | 82 |
| 13 | 100 | 93 |
| 14 | 94 | 84 |
| 15 | 98 | 79 |
| 16 | 95 | 99 |
| 17 | 104 | 94 |
| 18 | 95 | 84 |
| 19 | 94 | 87 |
| 20 | 93 | 81 |
| 21 | 95 | 94 |
| 22 | 95 | 96 |
| 23 | 93 | 98 |
| 24 | 97 | 91 |
| 25 | 94 | 98 |
| 26 | 94 | 83 |
| 27 | 93 | 78 |
| 28 | 95 | 89 |
| 29 | 94 | 91 |
| 30 | 90 | 92 |
| 31 | 91 | 80 |
| 32 | 92 | 82 |
| 33 | 92 | 94 |
| 34 | 100 | 77 |
| 35 | 91 | 92 |
| 36 | 91 | 79 |
| 37 | 91 | 94 |
| 38 | 89 | 83 |
| 39 | 96 | 78 |
| 40 | 91 | 81 |
| 41 | 91 | 83 |
| 42 | 94 | 90 |
| 43 | 91 | 81 |
| 44 | 91 | 92 |
| 45 | 90 | 80 |
| 46 | 94 | 88 |
| 47 | 99 | 78 |
| 48 | 98 | 92 |
| 49 | 97 | 89 |
| 50 | 99 | 93 |

